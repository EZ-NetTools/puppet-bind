# This file is managed by puppet - changes will be lost
include "<%= @confdir %>/acls.conf";
include "<%= @confdir %>/keys.conf";
include "<%= @confdir %>/views.conf";
include "<%= @confdir %>/controls.conf";
<%- if @statistics_port -%>

statistics-channels {
    inet 127.0.0.1 port <%= @statistics_port %> allow { 127.0.0.1; };
};
<%- end -%>

options {
	directory "<%= @cachedir %>";
	dump-file "<%= @cachedir %>/data/cache_dump.db";
	statistics-file "<%= @cachedir %>/data/named_stats.txt";
	managed-keys-directory "<%= @cachedir %>/dynamic";
<%- if @forwarders and @forwarders != '' -%>
	forwarders {
<%-   Array(@forwarders).each do |forwarder| -%>
		<%= forwarder %>;
<%-   end -%>
	};
<%- end -%>
	auth-nxdomain <%= @auth_nxdomain ? 'yes' : 'no' %>;
	listen-on-v6 { any; };
	dnssec-enable <%= @dnssec ? 'yes' : 'no' %>;
	dnssec-validation <%= @dnssec ? 'yes' : 'no' %>;
	dnssec-lookaside <%= @dnssec ? 'auto' : 'no' %>;
<%- if @version != '' -%>
	version "<%= @version %>";
<%- end -%>
<%- if @allow_new_zones -%>
	allow-new-zones yes;
<%- end -%>
  	include "<%= @confdir %>/options.conf.local"; 
};

include "<%= @confdir %>/named.conf.local";
